<!DOCTYPE html>
<html>
<head>
<title>Signup | Biniyog</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:sans-serif;background:#f2f2f2}
.card{max-width:360px;margin:40px auto;background:#fff;padding:25px;border-radius:15px}
button{width:100%;padding:14px;background:#e91e63;color:#fff;border:none;border-radius:30px}
input{width:100%;padding:12px;margin:10px 0;border:none;border-bottom:1px solid #ccc}
</style>
</head>
<body>

<div class="card">
<h2>Create Account</h2>

<input id="name" placeholder="Name">
<input id="mobile" placeholder="Mobile Number">
<input id="pass1" type="password" placeholder="New Password">
<input id="pass2" type="password" placeholder="Repeat Password">

<button onclick="signup()">SIGN UP</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";
import { getFirestore, doc, setDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBFsTzlRPoWHVXEHbKrPdwxslxZGa7Kqfw",
  authDomain: "biniyog-95d00.firebaseapp.com",
  projectId: "biniyog-95d00"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

window.signup = async ()=>{
  const name = name.value;
  const mobile = mobile.value;
  const p1 = pass1.value;
  const p2 = pass2.value;

  if(p1!==p2) return alert("Password mismatch");

  const email = mobile + "@biniyog.com";

  const cred = await createUserWithEmailAndPassword(auth,email,p1);

  await setDoc(doc(db,"users",cred.user.uid),{
    name,
    mobile,
    balance:0,
    createdAt: serverTimestamp()
  });

  location.href="index.html";
};
</script>
</body>
</html>
