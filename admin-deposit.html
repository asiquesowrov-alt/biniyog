<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin Deposit</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:Arial;background:#0f172a;color:#fff}
header{background:#020617;padding:15px;text-align:center}
.card{background:#020617;margin:15px;padding:15px;border-radius:12px}
button{padding:8px 12px;border:none;border-radius:8px;margin-right:5px}
.approve{background:#22c55e;color:#000}
.reject{background:#ef4444;color:#fff}
</style>
</head>
<body>

<script>
if(localStorage.getItem("adminLogged")!=="yes"){
  location.href="admin-login.html";
}
</script>

<header>ðŸ’° Deposit Requests</header>
<div id="list"></div>

<script>
let data=JSON.parse(localStorage.getItem("depositRequests"))||[];
let box=document.getElementById("list");
box.innerHTML="";

data.forEach(d=>{
  if(d.status!=="PENDING") return;
  let div=document.createElement("div");
  div.className="card";
  div.innerHTML=`
    User: ${d.user}<br>
    à§³${d.amount} (${d.method})<br><br>
    <button class="approve" onclick="approve(${d.id})">Approve</button>
    <button class="reject" onclick="reject(${d.id})">Reject</button>
  `;
  box.appendChild(div);
});

function approve(id){
  let list=JSON.parse(localStorage.getItem("depositRequests"))||[];
  list.forEach(d=>{
    if(d.id===id){
      d.status="APPROVED";
      let key="balance_"+d.user;
      localStorage.setItem(key,(Number(localStorage.getItem(key))||0)+d.amount);
    }
  });
  localStorage.setItem("depositRequests",JSON.stringify(list));
  location.reload();
}

function reject(id){
  let list=JSON.parse(localStorage.getItem("depositRequests"))||[];
  list.forEach(d=>{
    if(d.id===id) d.status="REJECTED";
  });
  localStorage.setItem("depositRequests",JSON.stringify(list));
  location.reload();
}
</script>

</body>
</html>
